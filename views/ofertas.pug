extends ./layout/index

block contenido
    .container.my-5
        h1.text-center.mb-5.font-weight-bold(style="font-family: 'Playfair Display', serif;") Ofertas Irresistibles

        //- Banner de Marketing
        .alert.alert-danger.text-center.mb-5.shadow-sm.border-0(style="background-color: #ffe5e5; color: #cc0000;")
            h4.alert-heading.fw-bold ðŸ”¥ Â¡LIQUIDACIÃ“N TOTAL!
            p SelecciÃ³n especial de tÃ­tulos con el <strong>100% de descuento</strong>. Solo por tiempo limitado.

        if libros && libros.length > 0
            .row.row-cols-1.row-cols-md-2.row-cols-lg-3.g-4
                each libroItem in libros
                    //- --- DATOS ---
                    - var info = libroItem.volumeInfo || libroItem
                    - var titulo = info.title || libroItem.titulo || 'Sin tÃ­tulo'
                    - var id = libroItem.id || libroItem._id

                    //- AUTORES
                    - var autores = 'Autor clÃ¡sico'
                    if info.authors
                        - autores = Array.isArray(info.authors) ? info.authors.join(', ') : info.authors

                    //- IMAGEN
                    - var imagen = 'https://via.placeholder.com/300x450/e9ecef/868e96?text=Oferta'
                    if info.imageLinks && info.imageLinks.thumbnail
                        - imagen = info.imageLinks.thumbnail
                    else if libroItem.imagen
                        - imagen = libroItem.imagen

                    //- --- TARJETA ---
                    .col.mb-4
                        .card.h-100.shadow-sm.border-0
                            //- Imagen con etiqueta de descuento
                            .div.bg-light.d-flex.align-items-center.justify-content-center(style="height: 400px; overflow: hidden; border-radius: 5px 5px 0 0; position: relative;")

                                //- ETIQUETA ROJA DE DESCUENTO
                                span.badge.badge-danger.shadow(style="position: absolute; top: 15px; right: 15px; font-size: 1rem; z-index: 10; padding: 0.5em 1em; transform: rotate(0deg);") -100% GRATIS

                                img(src=imagen alt=titulo style="height: 100%; width: 100%; object-fit: contain;" referrerpolicy="no-referrer")

                            .card-body.d-flex.flex-column
                                h5.card-title.fw-bold.text-center.mt-2(style="font-size: 1.1rem; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; height: 2.8em;" title=titulo)= titulo
                                p.text-muted.text-center.small.mb-3(style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;") #{autores}

                                //- SECCIÃ“N PRECIO (SIMULACIÃ“N DE OFERTA)
                                .mt-auto.pt-3.border-top
                                    .d-flex.justify-content-center.align-items-center.flex-column.mb-3
                                        //- Precio ficticio tachado para efecto psicolÃ³gico
                                        span.text-muted.small(style="text-decoration: line-through;") PVP: 9.99 â‚¬
                                        //- Precio real (Gratis)
                                        span.h3.font-weight-bold.text-success.mb-0 0.00 â‚¬

                                    if id
                                        a.btn.btn-outline-danger.btn-block.rounded-pill(href='/libro/' + id) Conseguir Ahora
                                    else
                                        button.btn.btn-secondary.btn-block(disabled) Agotado
        else
            .alert.alert-warning.text-center.mt-5 No hay ofertas disponibles en este momento.